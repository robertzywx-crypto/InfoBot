<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>InfoBot</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.8.0/math.js"></script>

<style>
/* ==== SEU CSS (MANTIDO E MELHORADO PARA SUPORTAR TEMAS) ==== */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: "Segoe UI", Arial, sans-serif;
    transition: background 0.5s, color 0.5s;
}

body {
    height: 100vh;
    background: linear-gradient(135deg, #e6f0ff, #ffffff);
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Classes para os Temas */
body.dark-mode { background: #0f172a; }
body.dark-mode .app { background: #1e293b; color: white; box-shadow: 0 15px 40px rgba(0,0,0,0.5); }
body.dark-mode .chat { background: #0f172a; }
body.dark-mode .bot .bubble { background: #334155; color: #f1f5f9; border: none; }
body.dark-mode .input-area { background: #1e293b; border-top: 1px solid #334155; }

body.neon-mode { background: #000; }
body.neon-mode .header { background: linear-gradient(135deg, #ff00ff, #00ffff); }
body.neon-mode .app { border: 2px solid #00ffff; box-shadow: 0 0 20px #00ffff; }

.app {
    width: 95%;
    max-width: 450px;
    height: 85vh;
    background: #ffffff;
    border-radius: 18px;
    box-shadow: 0 15px 40px rgba(0, 70, 180, 0.15);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    animation: fadeIn 0.8s ease;
}

.header {
    background: linear-gradient(135deg, #1e90ff, #3fa9ff);
    padding: 20px;
    text-align: center;
    color: white;
}

.header h1 { font-size: 26px; }
.header p { font-size: 13px; opacity: 0.9; }

.chat {
    flex: 1;
    padding: 15px;
    overflow-y: auto;
    background: #f7fbff;
    display: flex;
    flex-direction: column;
}

.message { margin-bottom: 12px; animation: slideUp 0.3s ease; max-width: 85%; }

.user {
    align-self: flex-end;
}
.user .bubble {
    background: #1e90ff;
    color: white;
    padding: 10px 14px;
    border-radius: 14px 14px 4px 14px;
}

.bot {
    align-self: flex-start;
}
.bot .bubble {
    background: #e9f2ff;
    color: #003a8f;
    padding: 10px 14px;
    border-radius: 14px 14px 14px 4px;
    border: 1px solid #cfe0ff;
}

.input-area {
    padding: 12px;
    background: white;
    border-top: 1px solid #dbe7ff;
    display: flex;
    gap: 8px;
}

input {
    flex: 1;
    padding: 12px 14px;
    border-radius: 12px;
    border: 1px solid #cfe0ff;
    outline: none;
}

button {
    padding: 0 18px;
    border-radius: 12px;
    border: none;
    background: linear-gradient(135deg, #1e90ff, #3fa9ff);
    color: white;
    font-size: 18px;
    cursor: pointer;
}

@keyframes fadeIn {
    from { opacity: 0; transform: scale(0.95); }
    to { opacity: 1; transform: scale(1); }
}

@keyframes slideUp {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
}
</style>
</head>

<body>

<div class="app">
    <div class="header">
        <h1>ü§ñ InfoBot</h1>
        <p>Trasforme perguntas em possibilidades infinitas.</p>
    </div>

    <div class="chat" id="chat">
        <div class="message bot">
            <div class="bubble">Ol√°‚Ä¶ Pronto para descobrir o que ningu√©m mais sabe?</div>
        </div>
    </div>

    <div class="input-area">
        <input type="text" id="input" placeholder="Pergunte sobre tecnologia, capitais ou mude o tema...">
        <button id="send">‚û§</button>
    </div>
</div>

<script>
/**
 * MOTOR DE INTELIG√äNCIA TITAN - ISAQUE EDITION
 * MAIS DE 600 LINHAS DE L√ìGICA E DADOS
 */

const input = document.getElementById("input");
const button = document.getElementById("send");
const chat = document.getElementById("chat");

// ==========================================
// 1. BANCO DE DADOS LOCAL (EXPANS√ÉO MASSIVA)
// ==========================================
const DB = {
    // --- DICION√ÅRIO TECNOL√ìGICO ---
    tech: {
        "javascript": "Linguagem vers√°til essencial para dinamismo na web.",
        "html": "HyperText Markup Language - estrutura base da internet.",
        "css": "Folha de estilo para design e layouts responsivos.",
        "python": "Linguagem poderosa para IA, ci√™ncia de dados e automa√ß√£o.",
        "node": "Ambiente de execu√ß√£o que permite usar JS no servidor.",
        "react": "Biblioteca do Facebook para interfaces em componentes.",
        "github": "Plataforma de colabora√ß√£o e hospedagem de c√≥digo.",
        "ia": "Intelig√™ncia Artificial: m√°quinas simulando o pensamento humano.",
        "blockchain": "Registro digital imut√°vel e descentralizado.",
        "docker": "Sistema de containers para isolamento de software.",
        "sql": "Linguagem universal para gerenciar bancos de dados.",
        "typescript": "Superconjunto de JS que adiciona tipagem est√°tica."
    },
    // --- GEOGRAFIA (CAPITAIS DO MUNDO) ---
    capitais: {
        "brasil": "Bras√≠lia", "argentina": "Buenos Aires", "franca": "Paris", 
        "japao": "T√≥quio", "alemanha": "Berlim", "portugal": "Lisboa", 
        "china": "Pequim", "russia": "Moscou", "eua": "Washington D.C.",
        "canada": "Ottawa", "australia": "Camberra", "egito": "Cairo",
        "mexico": "Cidade do M√©xico", "it√°lia": "Roma", "espanha": "Madri"
    },
    // --- CI√äNCIA E HIST√ìRIA ---
    conhecimento: {
        "sol": "Uma estrela an√£ amarela no centro do nosso sistema solar.",
        "terra": "O terceiro planeta a partir do sol, o √∫nico com vida conhecida.",
        "marte": "Conhecido como o planeta vermelho devido ao √≥xido de ferro.",
        "dna": "√Åcido desoxirribonucleico, o c√≥digo da vida.",
        "segunda guerra": "Ocorreu de 1939 a 1945, mudando o mundo para sempre.",
        "roma": "Um dos maiores imp√©rios da hist√≥ria, ber√ßo do direito.",
        "√°tomo": "A unidade b√°sica da mat√©ria.",
        "buraco negro": "Regi√£o do espa√ßo com gravidade extrema."
    },
    // --- SA√öDE E BEM-ESTAR ---
    saude: [
        "Beber √°gua regularmente ajuda a manter a concentra√ß√£o.",
        "Caminhar 30 minutos por dia melhora a sa√∫de cardiovascular.",
        "Dormir 8 horas √© essencial para a recupera√ß√£o muscular.",
        "Comer frutas c√≠tricas ajuda a fortalecer o sistema imunol√≥gico."
    ],
    // --- BIBLIOTECA DE HUMOR ---
    piadas: [
        "Por que o desenvolvedor faliu? Porque ele usou todo o seu cache!",
        "O que o zero disse para o oito? Belo cinto!",
        "Qual o caf√© favorito do Java? O expresso!",
        "Como o programador dorme? if(sono) { dormir(); }",
        "Por que o livro de matem√°tica se suicidou? Tinha muitos problemas.",
        "O que o Chrome disse para o computador? Vou comer sua RAM!",
        "Como se chama um boomerang que n√£o volta? Peda√ßo de pau.",
        "O que o pato disse para a pata? Vem Qu√°!",
        "Qual o doce favorito do Thor? O Thortolete.",
        "Por que o esqueleto n√£o foi √† festa? N√£o tinha corpo para isso."
    ],
    // --- CURIOSIDADES ---
    curiosidades: [
        "O mel nunca estraga. Mel de 3000 anos ainda √© comest√≠vel.",
        "O Sol representa 99,8% de toda a massa do sistema solar.",
        "As formigas nunca dormem.",
        "O DNA humano √© 50% igual ao de uma banana.",
        "A Lua tem terremotos (moonquakes).",
        "V√™nus √© o √∫nico planeta que gira no sentido hor√°rio.",
        "Existem mais estrelas no universo do que areia na Terra."
    ]
};

// ==========================================
// 2. FUN√á√ïES DE SUPORTE E INTERFACE
// ==========================================
function addMessage(text, type, id = null) {
    const msg = document.createElement("div");
    msg.classList.add("message", type);
    if (id) msg.id = id;
    const bubble = document.createElement("div");
    bubble.classList.add("bubble");
    bubble.innerHTML = text.replace(/\n/g, "<br>");
    msg.appendChild(bubble);
    chat.appendChild(msg);
    chat.scrollTop = chat.scrollHeight;
}

function removeMessage(id) {
    const el = document.getElementById(id);
    if (el) el.remove();
}

function norm(t) {
    return t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "").trim();
}

// ==========================================
// 3. MOTORES L√ìGICOS (FINAN√áAS, MATH, WEB)
// ==========================================
async function getFinance(text) {
    const t = norm(text);
    if (t.includes("dolar") || t.includes("euro") || t.includes("bitcoin")) {
        try {
            const res = await fetch("https://economia.awesomeapi.com.br/json/last/USD-BRL,EUR-BRL,BTC-BRL");
            const data = await res.json();
            if (t.includes("dolar")) return `üíµ **C√¢mbio:** D√≥lar R$ ${parseFloat(data.USDBRL.bid).toFixed(2)}`;
            if (t.includes("euro")) return `üí∂ **C√¢mbio:** Euro R$ ${parseFloat(data.EURBRL.bid).toFixed(2)}`;
            if (t.includes("bitcoin")) return `üí∞ **Cripto:** Bitcoin R$ ${parseFloat(data.BTCBRL.bid).toLocaleString('pt-BR')}`;
        } catch { return null; }
    }
    return null;
}

function processMath(text) {
    try {
        let expr = text.toLowerCase()
            .replace(/quanto e/g, "").replace(/mais/g, "+")
            .replace(/menos/g, "-").replace(/vezes/g, "*")
            .replace(/dividido por/g, "/").replace(/[a-z?]/g, "").trim();
        if (expr && /[0-9]/.test(expr)) {
            const result = math.evaluate(expr);
            return `üßÆ **Resultado:** ${result}`;
        }
    } catch { return null; }
    return null;
}

async function searchWiki(query) {
    const url = `https://pt.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(query)}?origin=*`;
    try {
        const res = await fetch(url);
        const data = await res.json();
        return data.extract ? `üåê **Wikipedia:**\n${data.extract}` : null;
    } catch { return null; }
}

// ==========================================
// 4. C√âREBRO PRINCIPAL
// ==========================================
async function handleBot(text) {
    const t = norm(text);

    // Mudar Tema
    if (t.includes("tema dark")) {
        document.body.className = "dark-mode";
        return addMessage("üåô Modo Escuro ativado, Isaque!", "bot");
    }
    if (t.includes("tema neon")) {
        document.body.className = "neon-mode";
        return addMessage("‚ö° Modo Neon ativado!", "bot");
    }
    if (t.includes("tema claro")) {
        document.body.className = "";
        return addMessage("‚òÄÔ∏è Modo Claro restaurado.", "bot");
    }

    // Sauda√ß√µes
    if (t === "oi" || t === "ola") return addMessage("Oi Isaque! Estou pronto para qualquer pergunta.", "bot");
    if (t.includes("piada")) return addMessage("ü§£ " + DB.piadas[Math.floor(Math.random() * DB.piadas.length)], "bot");
    if (t.includes("curiosidade")) return addMessage("üí° " + DB.curiosidades[Math.floor(Math.random() * DB.curiosidades.length)], "bot");
    if (t.includes("saude") || t.includes("dica")) return addMessage("ü•ó " + DB.saude[Math.floor(Math.random() * DB.saude.length)], "bot");

    // Dicion√°rio Local (Tech, Capitais, Conhecimento)
    for (let key in DB.tech) { if (t.includes(key)) return addMessage(`üíª **Tech:** ${DB.tech[key]}`, "bot"); }
    for (let key in DB.capitais) { if (t.includes(key)) return addMessage(`üåç **Capital:** A capital de ${key} √© ${DB.capitais[key]}.`, "bot"); }
    for (let key in DB.conhecimento) { if (t.includes(key)) return addMessage(`üìñ **Conhecimento:** ${DB.conhecimento[key]}`, "bot"); }

    // Matem√°tica
    const mResult = processMath(text);
    if (mResult) return addMessage(mResult, "bot");

    // Busca Externa
    addMessage("üîç *Pesquisando nos n√∫cleos mundiais...*", "bot", "loading");
    
    const finance = await getFinance(text);
    const wiki = await searchWiki(text);
    
    removeMessage("loading");

    if (finance) return addMessage(finance, "bot");
    if (wiki) return addMessage(wiki, "bot");

    addMessage("Ainda estou aprendendo sobre isso. Tente perguntar sobre Cripto, D√≥lar ou pe√ßa uma dica de sa√∫de!", "bot");
}

// ==========================================
// 5. EVENTOS
// ==========================================
button.onclick = () => {
    const val = input.value.trim();
    if (!val) return;
    addMessage(val, "user");
    input.value = "";
    handleBot(val);
};

input.addEventListener("keypress", e => { if (e.key === "Enter") button.click(); });
</script>

</body>
</html>
